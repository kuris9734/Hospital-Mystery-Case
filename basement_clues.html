<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ°ä¸‹å®¤åœ°å›¾ - åŸéƒŠåŒ»é™¢è°œæ¡ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
        }
        
        .map-container {
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .map-area {
            background: #2a2a2a;
            border: 1px solid #444;
            position: relative;
            overflow: hidden;
        }
        
        .room {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .room:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #999;
            transform: scale(1.05);
        }
        
        .secret-room {
            background: rgba(255, 0, 0, 0.2);
            border-color: #ff4444;
        }
        
        .secret-room:hover {
            background: rgba(255, 0, 0, 0.3);
            border-color: #ff6666;
        }
        
        .corridor {
            position: absolute;
            background: #333;
            border: 1px solid #555;
        }
        
        .stair {
            position: absolute;
            background: #444;
            border: 2px dashed #777;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #aaa;
        }
        
        .elevator {
            position: absolute;
            background: #555;
            border: 3px solid #888;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #fff;
        }
        
        .map-fragment {
            position: absolute;
            width: 40px;
            height: 30px;
            background: rgba(255, 215, 0, 0.3);
            border: 2px solid #ffd700;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            cursor: pointer;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        
        .clue-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #ffd700;
            border-radius: 8px;
            padding: 20px;
            max-width: 400px;
            z-index: 1000;
            display: none;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            display: none;
        }
    </style>
</head>
<body class="text-white">
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="max-w-6xl w-full">
            <!-- Header -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold mb-2" style="font-family: 'Noto Serif SC', serif;">åœ°ä¸‹å®¤åœ°å›¾</h1>
                <p class="text-gray-300">å©·æŠ¤å£«ç•™ä¸‹çš„åœ°å›¾ç¢ç‰‡æ˜¾ç¤ºäº†åŒ»é™¢åœ°ä¸‹ç»“æ„</p>
            </div>
            
            <!-- Map Container -->
            <div class="map-container rounded-xl p-6 mb-6">
                <div class="map-area w-full h-96 relative mx-auto" style="max-width: 800px;">
                    <!-- Corridors -->
                    <div class="corridor" style="left: 0; top: 50%; width: 100%; height: 20px;"></div>
                    <div class="corridor" style="left: 50%; top: 0; width: 20px; height: 100%;"></div>
                    <div class="corridor" style="left: 25%; top: 25%; width: 20px; height: 50%;"></div>
                    <div class="corridor" style="left: 75%; top: 25%; width: 20px; height: 50%;"></div>
                    
                    <!-- Rooms -->
                    <div class="room" style="left: 10%; top: 20%; width: 100px; height: 80px;" onclick="showRoomInfo('æ¡£æ¡ˆå®¤')">
                        æ¡£æ¡ˆå®¤
                    </div>
                    
                    <div class="room" style="left: 60%; top: 15%; width: 120px; height: 60px;" onclick="showRoomInfo('å®éªŒå®¤')">
                        å®éªŒå®¤
                    </div>
                    
                    <div class="room secret-room" style="left: 65%; top: 65%; width: 100px; height: 80px;" onclick="showRoomInfo('ç§˜å¯†å®éªŒå®¤')">
                        ç§˜å¯†å®éªŒå®¤
                    </div>
                    
                    <div class="room" style="left: 15%; top: 70%; width: 90px; height: 70px;" onclick="showRoomInfo('å‚¨è—å®¤')">
                        å‚¨è—å®¤
                    </div>
                    
                    <!-- Stairs -->
                    <div class="stair" style="left: 85%; top: 40%; width: 60px; height: 40px;">
                        æ¥¼æ¢¯
                    </div>
                    
                    <!-- Elevator -->
                    <div class="elevator" style="left: 5%; top: 45%; width: 50px; height: 50px;">
                        ç”µæ¢¯
                    </div>
                    
                    <!-- Map Fragments -->
                    <div class="map-fragment" style="left: 70%; top: 30%;" onclick="collectFragment('å®éªŒè®°å½•')">
                        ğŸ“‹
                    </div>
                    
                    <div class="map-fragment" style="left: 30%; top: 60%;" onclick="collectFragment('å¯†ç æç¤º')">
                        ğŸ”
                    </div>
                    
                    <div class="map-fragment" style="left: 80%; top: 70%;" onclick="collectFragment('éšè—é€šé“')">
                        ğŸšª
                    </div>
                </div>
            </div>
            
            <!-- Map Legend -->
            <div class="bg-gray-800 rounded-lg p-6 mb-6">
                <h2 class="text-2xl font-bold mb-4">åœ°å›¾è¯´æ˜</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold mb-2 text-blue-400">æˆ¿é—´ç±»å‹</h3>
                        <ul class="space-y-2 text-sm">
                            <li>â€¢ <span class="inline-block w-4 h-4 bg-gray-600 border border-gray-400 mr-2"></span>æ™®é€šæˆ¿é—´</li>
                            <li>â€¢ <span class="inline-block w-4 h-4 bg-red-800 border border-red-400 mr-2"></span>ç§˜å¯†æˆ¿é—´</li>
                            <li>â€¢ <span class="inline-block w-4 h-4 bg-yellow-600 border border-yellow-400 mr-2"></span>åœ°å›¾ç¢ç‰‡</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-2 text-green-400">é€šé“</h3>
                        <ul class="space-y-2 text-sm">
                            <li>â€¢ ğŸšª ä¸»è¦é€šé“</li>
                            <li>â€¢ ğŸƒ ç´§æ€¥å‡ºå£</li>
                            <li>â€¢ ğŸ­ éšè—é€šé“</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-2 text-yellow-400">é‡è¦å‘ç°</h3>
                        <ul class="space-y-2 text-sm">
                            <li>â€¢ ç§˜å¯†å®éªŒå®¤ä½ç½®</li>
                            <li>â€¢ éšè—é€šé“å…¥å£</li>
                            <li>â€¢ é‡è¦æ–‡ä»¶ä½ç½®</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Collected Fragments -->
            <div class="bg-gray-800 rounded-lg p-6 mb-6">
                <h2 class="text-2xl font-bold mb-4">å·²æ”¶é›†çš„çº¿ç´¢</h2>
                <div id="collectedFragments" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="text-gray-500 text-center py-4">
                        ç‚¹å‡»åœ°å›¾ç¢ç‰‡æ”¶é›†çº¿ç´¢
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4">
                <button onclick="combineFragments()" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-lg font-medium transition-colors">
                    æ‹¼åˆåœ°å›¾
                </button>
                <button onclick="window.history.back()" class="bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg font-medium transition-colors">
                    è¿”å›æ¸¸æˆ
                </button>
                <button onclick="showHint()" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-medium transition-colors">
                    æŸ¥çœ‹æç¤º
                </button>
            </div>
        </div>
    </div>
    
    <!-- Popup Overlay -->
    <div class="overlay" id="overlay" onclick="closePopup()"></div>
    
    <!-- Clue Popup -->
    <div class="clue-popup" id="cluePopup">
        <h3 class="text-xl font-bold mb-4" id="popupTitle">çº¿ç´¢è¯¦æƒ…</h3>
        <p class="mb-4" id="popupContent">çº¿ç´¢å†…å®¹</p>
        <button onclick="closePopup()" class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded font-medium">
            å…³é—­
        </button>
    </div>

    <script>
        let collectedFragments = [];
        
        function showRoomInfo(roomName) {
            const roomInfo = {
                'æ¡£æ¡ˆå®¤': 'å­˜æ”¾ç€åŒ»é™¢çš„å„ç§è®°å½•æ–‡ä»¶ï¼Œå¯èƒ½åŒ…å«é‡è¦è¯æ®ã€‚',
                'å®éªŒå®¤': 'è¡¨é¢ä¸Šæ˜¯åŒ»å­¦å®éªŒå®¤ï¼Œä½†å¯èƒ½æœ‰å…¶ä»–ç”¨é€”ã€‚',
                'ç§˜å¯†å®éªŒå®¤': 'åœ°å›¾ä¸Šæ ‡è®°çš„ç‰¹æ®Šæˆ¿é—´ï¼Œå©·æŠ¤å£«çš„çº¿ç´¢æŒ‡å‘è¿™é‡Œã€‚',
                'å‚¨è—å®¤': 'å­˜æ”¾åŒ»ç–—ç”¨å“çš„åœ°æ–¹ï¼Œä½†å¯èƒ½æœ‰éšè—çš„ç‰©å“ã€‚'
            };
            
            showPopup(`æˆ¿é—´ä¿¡æ¯ï¼š${roomName}`, roomInfo[roomName] || 'è¿™ä¸ªæˆ¿é—´çœ‹èµ·æ¥å¾ˆé‡è¦ï¼Œéœ€è¦è¿›ä¸€æ­¥è°ƒæŸ¥ã€‚');
        }
        
        function collectFragment(type) {
            if (!collectedFragments.includes(type)) {
                collectedFragments.push(type);
                updateFragmentsList();
                
                showPopup('å‘ç°çº¿ç´¢ï¼', `ä½ å‘ç°äº†ï¼š${type}
                
è¿™ä¸ªçº¿ç´¢å¯èƒ½å¯¹ä½ è§£å¼€åŒ»é™¢çš„ç§˜å¯†å¾ˆé‡è¦ã€‚`);
                
                // Add visual feedback
                event.target.style.animation = 'none';
                event.target.style.opacity = '0.3';
                event.target.style.pointerEvents = 'none';
            }
        }
        
        function updateFragmentsList() {
            const container = document.getElementById('collectedFragments');
            
            if (collectedFragments.length === 0) {
                container.innerHTML = '<div class="text-gray-500 text-center py-4">ç‚¹å‡»åœ°å›¾ç¢ç‰‡æ”¶é›†çº¿ç´¢</div>';
                return;
            }
            
            container.innerHTML = collectedFragments.map(fragment => `
                <div class="bg-gray-700 p-3 rounded-lg text-center">
                    <div class="text-2xl mb-2">${getFragmentIcon(fragment)}</div>
                    <div class="text-sm">${fragment}</div>
                </div>
            `).join('');
        }
        
        function getFragmentIcon(fragment) {
            const icons = {
                'å®éªŒè®°å½•': 'ğŸ“‹',
                'å¯†ç æç¤º': 'ğŸ”',
                'éšè—é€šé“': 'ğŸšª'
            };
            return icons[fragment] || 'ğŸ“„';
        }
        
        function combineFragments() {
            if (collectedFragments.length < 2) {
                showPopup('æç¤º', 'éœ€è¦æ”¶é›†æ›´å¤šç¢ç‰‡æ‰èƒ½æ‹¼åˆåœ°å›¾ã€‚');
                return;
            }
            
            showPopup('åœ°å›¾æ‹¼åˆå®Œæˆï¼', `ä½ å·²ç»æ”¶é›†äº†${collectedFragments.length}ä¸ªç¢ç‰‡ã€‚
            
æ‹¼åˆåçš„åœ°å›¾æ˜¾ç¤ºäº†é€šå¾€ç§˜å¯†å®éªŒå®¤çš„å®Œæ•´è·¯å¾„ã€‚ç°åœ¨ä½ çŸ¥é“å¦‚ä½•åˆ°è¾¾é‚£é‡Œäº†ã€‚`);
            
            // Unlock secret passage
            setTimeout(() => {
                const secretRoom = document.querySelector('.secret-room');
                secretRoom.style.background = 'rgba(0, 255, 0, 0.3)';
                secretRoom.style.borderColor = '#00ff00';
                secretRoom.style.boxShadow = '0 0 20px rgba(0, 255, 0, 0.5)';
            }, 1000);
        }
        
        function showHint() {
            const hints = [
                'æ³¨æ„åœ°å›¾ä¸Šçš„é»„è‰²æ ‡è®°ï¼Œå®ƒä»¬å¯èƒ½æ˜¯é‡è¦çº¿ç´¢ã€‚',
                'ç§˜å¯†å®éªŒå®¤çš„ä½ç½®è¢«ç‰¹åˆ«æ ‡è®°äº†ï¼Œéœ€è¦æ‰¾åˆ°æ‰€æœ‰ç¢ç‰‡æ‰èƒ½è§£é”ã€‚',
                'å©·æŠ¤å£«çš„çº¿ç´¢æŒ‡å‘åœ°ä¸‹å®¤ï¼Œè¿™é‡Œå¯èƒ½éšè—ç€çœŸç›¸ã€‚',
                'è§‚å¯Ÿæˆ¿é—´ä¹‹é—´çš„è¿æ¥æ–¹å¼ï¼Œå¯èƒ½æœ‰éšè—é€šé“ã€‚'
            ];
            
            const randomHint = hints[Math.floor(Math.random() * hints.length)];
            showPopup('æç¤º', randomHint);
        }
        
        function showPopup(title, content) {
            document.getElementById('popupTitle').textContent = title;
            document.getElementById('popupContent').textContent = content;
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('cluePopup').style.display = 'block';
        }
        
        function closePopup() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('cluePopup').style.display = 'none';
        }
        
        // Initialize
        updateFragmentsList();
    </script>
</body>
</html>